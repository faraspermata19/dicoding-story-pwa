/*! For license information please see 887.c8f7fd3e092f84c7c4e5.js.LICENSE.txt */
"use strict";(self.webpackChunkapp_starter_project_with_webpack=self.webpackChunkapp_starter_project_with_webpack||[]).push([[887],{133:(t,e,n)=>{n.d(e,{A:()=>u});var r=n(604);function o(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function c(n,r,o,a){var c=r&&r.prototype instanceof s?r:s,f=Object.create(c.prototype);return i(f,"_invoke",function(n,r,o){var i,a,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return i=e,a=0,c=t,p.n=n,u}};function d(n,r){for(a=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],d=p.p,y=i[2];n>3?(o=y===r)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=d&&((o=n<2&&d<i[1])?(a=0,p.v=r,p.n=i[1]):d<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,a=0))}if(o||n>1)return u;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,y),a=f,c=y;(e=a<2?t:c)||!l;){i||(a?a<3?(a>1&&(p.n=-1),d(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(a||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,a<2&&(a=0)}else 1===a&&(e=i.return)&&e.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==u)break}catch(e){i=t,a=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,a),!0),f}var u={};function s(){}function f(){}function l(){}e=Object.getPrototypeOf;var p=[][r]?e(e([][r]())):(i(e={},r,function(){return this}),e),d=l.prototype=s.prototype=Object.create(p);function y(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,i(t,a,"GeneratorFunction")),t.prototype=Object.create(d),t}return f.prototype=l,i(d,"constructor",l),i(l,"constructor",f),f.displayName="GeneratorFunction",i(l,a,"GeneratorFunction"),i(d),i(d,a,"Generator"),i(d,r,function(){return this}),i(d,"toString",function(){return"[object Generator]"}),(o=function(){return{w:c,m:y}})()}function i(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}i=function(t,e,n,r){function a(e,n){i(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},i(t,e,n,r)}function a(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function c(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function c(t){a(i,r,o,c,u,"next",t)}function u(t){a(i,r,o,c,u,"throw",t)}c(void 0)})}}const u={getStory:function(t){return c(o().m(function e(){return o().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,r.G;case 1:return e.a(2,e.v.get(r.O_,t))}},e)}))()},getAllStories:function(){return c(o().m(function t(){return o().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,r.G;case 1:return t.a(2,t.v.getAll(r.O_))}},t)}))()},putStory:function(t){return c(o().m(function e(){return o().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,r.G;case 1:return e.a(2,e.v.put(r.O_,t))}},e)}))()},deleteStory:function(t){return c(o().m(function e(){return o().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,r.G;case 1:return e.a(2,e.v.delete(r.O_,t))}},e)}))()}}},602:(t,e,n)=>{n.d(e,{P2:()=>y});const r=(t,e)=>e.some(e=>t instanceof e);let o,i;const a=new WeakMap,c=new WeakMap,u=new WeakMap;let s={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return a.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return p(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function f(t){s=t(s)}function l(t){return"function"==typeof t?(e=t,(i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(d(this),t),p(this.request)}:function(...t){return p(e.apply(d(this),t))}):(t instanceof IDBTransaction&&function(t){if(a.has(t))return;const e=new Promise((e,n)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",i),t.removeEventListener("abort",i)},o=()=>{e(),r()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",i),t.addEventListener("abort",i)});a.set(t,e)}(t),r(t,o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,s):t);var e}function p(t){if(t instanceof IDBRequest)return function(t){const e=new Promise((e,n)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",i)},o=()=>{e(p(t.result)),r()},i=()=>{n(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",i)});return u.set(e,t),e}(t);if(c.has(t))return c.get(t);const e=l(t);return e!==t&&(c.set(t,e),u.set(e,t)),e}const d=t=>u.get(t);function y(t,e,{blocked:n,upgrade:r,blocking:o,terminated:i}={}){const a=indexedDB.open(t,e),c=p(a);return r&&a.addEventListener("upgradeneeded",t=>{r(p(a.result),t.oldVersion,t.newVersion,p(a.transaction),t)}),n&&a.addEventListener("blocked",t=>n(t.oldVersion,t.newVersion,t)),c.then(t=>{i&&t.addEventListener("close",()=>i()),o&&t.addEventListener("versionchange",t=>o(t.oldVersion,t.newVersion,t))}).catch(()=>{}),c}const v=["get","getKey","getAll","getAllKeys","count"],b=["put","add","delete","clear"],h=new Map;function m(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(h.get(e))return h.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=b.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!v.includes(n))return;const i=async function(t,...e){const i=this.transaction(t,o?"readwrite":"readonly");let a=i.store;return r&&(a=a.index(e.shift())),(await Promise.all([a[n](...e),o&&i.done]))[0]};return h.set(e,i),i}f(t=>({...t,get:(e,n,r)=>m(e,n)||t.get(e,n,r),has:(e,n)=>!!m(e,n)||t.has(e,n)}));const g=["continue","continuePrimaryKey","advance"],w={},S=new WeakMap,k=new WeakMap,j={get(t,e){if(!g.includes(e))return t[e];let n=w[e];return n||(n=w[e]=function(...t){S.set(this,k.get(this)[e](...t))}),n}};async function*O(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;const n=new Proxy(e,j);for(k.set(n,e),u.set(n,d(e));e;)yield n,e=await(S.get(n)||e.continue()),S.delete(n)}function I(t,e){return e===Symbol.asyncIterator&&r(t,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===e&&r(t,[IDBIndex,IDBObjectStore])}f(t=>({...t,get:(e,n,r)=>I(e,n)?O:t.get(e,n,r),has:(e,n)=>I(e,n)||t.has(e,n)}))},604:(t,e,n)=>{n.d(e,{G:()=>a,O_:()=>o,ai:()=>i});var r=n(602),o="story-favorites",i="story-sync",a=(0,r.P2)("dicoding-story-db",1,{upgrade:function(t){t.objectStoreNames.contains(o)||t.createObjectStore(o,{keyPath:"id"}),t.objectStoreNames.contains(i)||t.createObjectStore(i,{keyPath:"id",autoIncrement:!0})}})},887:(t,e,n)=>{n.r(e),n.d(e,{default:()=>p});var r=n(456),o=n(133);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var a=r&&r.prototype instanceof s?r:s,f=Object.create(a.prototype);return c(f,"_invoke",function(n,r,o){var i,a,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return i=e,a=0,c=t,p.n=n,u}};function d(n,r){for(a=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],d=p.p,y=i[2];n>3?(o=y===r)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=d&&((o=n<2&&d<i[1])?(a=0,p.v=r,p.n=i[1]):d<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,a=0))}if(o||n>1)return u;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,y),a=f,c=y;(e=a<2?t:c)||!l;){i||(a?a<3?(a>1&&(p.n=-1),d(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(a||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,a<2&&(a=0)}else 1===a&&(e=i.return)&&e.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==u)break}catch(e){i=t,a=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),f}var u={};function s(){}function f(){}function l(){}e=Object.getPrototypeOf;var p=[][r]?e(e([][r]())):(c(e={},r,function(){return this}),e),d=l.prototype=s.prototype=Object.create(p);function y(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,c(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return f.prototype=l,c(d,"constructor",l),c(l,"constructor",f),f.displayName="GeneratorFunction",c(l,o,"GeneratorFunction"),c(d),c(d,o,"Generator"),c(d,r,function(){return this}),c(d,"toString",function(){return"[object Generator]"}),(a=function(){return{w:i,m:y}})()}function c(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}c=function(t,e,n,r){function i(e,n){c(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},c(t,e,n,r)}function u(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function s(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){u(i,r,o,a,c,"next",t)}function c(t){u(i,r,o,a,c,"throw",t)}a(void 0)})}}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,l(r.key),r)}}function l(t){var e=function(t){if("object"!=i(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:e+""}var p=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"render",value:(i=s(a().m(function t(){return a().w(function(t){for(;;)if(0===t.n)return t.a(2,'\n      <section class="container">\n        <h1>Katalog Cerita Pengguna</h1>\n        <div id="story-list" class="story-list"></div>\n      </section>\n    ')},t)})),function(){return i.apply(this,arguments)})},{key:"afterRender",value:(n=s(a().m(function t(){var e,n,i,c,u,s;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return(e=document.querySelector("#story-list")).innerHTML="<p>Memuat cerita...</p>",n=[],t.p=1,t.n=2,(0,r.R7)();case 2:return i=t.v,t.n=3,i.json();case 3:if((c=t.v).error){t.n=4;break}n=c.listStory,t.n=5;break;case 4:throw new Error(c.message);case 5:t.n=10;break;case 6:return t.p=6,u=t.v,console.warn("Gagal memuat cerita dari API, mencoba IndexedDB (Offline Cache):",u),t.p=7,t.n=8,o.A.getAllStories();case 8:(n=t.v).length>0?console.log("Menampilkan cerita favorit dari cache lokal."):e.innerHTML="<p>Anda sedang offline dan tidak ada cerita yang tersimpan di cache lokal. Silakan kembali online.</p>",t.n=10;break;case 9:return t.p=9,s=t.v,console.error("Gagal memuat cerita dari IndexedDB:",s),e.innerHTML="<p>Gagal memuat daftar cerita. Silakan coba lagi nanti. Error: ".concat(s.message,"</p>"),t.a(2);case 10:n&&n.length>0?e.innerHTML=n.map(function(t){return'\n        <div class="story-card">\n          <a href="#/stories/'.concat(t.id,'">\n            <img src="').concat(t.photoUrl,'" alt="Foto cerita dari ').concat(t.name,'" />\n            <div class="story-info">\n              <h3>').concat(t.name,"</h3>\n              <p><strong>Deskripsi:</strong> ").concat(t.description,"</p>\n              <p><strong>Tanggal:</strong> ").concat(new Date(t.createdAt).toLocaleDateString(),"</p>\n              ").concat(t.lat&&t.lon?"<p><strong>Lokasi:</strong> ".concat(t.lat,", ").concat(t.lon,"</p>"):"","\n            </div>\n          </a>\n        </div>\n      ")}).join(""):e.innerHTML.includes("offline")||(e.innerHTML="<p>Belum ada cerita yang tersedia saat ini.</p>");case 11:return t.a(2)}},t,null,[[7,9],[1,6]])})),function(){return n.apply(this,arguments)})}],e&&f(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,i}()}}]);
//# sourceMappingURL=887.c8f7fd3e092f84c7c4e5.js.map