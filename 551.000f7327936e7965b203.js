/*! For license information please see 551.000f7327936e7965b203.js.LICENSE.txt */
"use strict";(self.webpackChunkdicoding_story_pwa=self.webpackChunkdicoding_story_pwa||[]).push([[551],{133:(t,n,r)=>{r.d(n,{A:()=>u});var e=r(604);function o(){var t,n,r="function"==typeof Symbol?Symbol:{},e=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function c(r,e,o,a){var c=e&&e.prototype instanceof s?e:s,f=Object.create(c.prototype);return i(f,"_invoke",function(r,e,o){var i,a,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,r){return i=n,a=0,c=t,p.n=r,u}};function y(r,e){for(a=r,c=e,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],y=p.p,v=i[2];r>3?(o=v===e)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(a=0,p.v=e,p.n=i[1]):y<v&&(o=r<3||i[0]>e||e>v)&&(i[4]=r,i[5]=e,p.n=v,a=0))}if(o||r>1)return u;throw l=!0,e}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),a=f,c=v;(n=a<2?t:c)||!l;){i||(a?a<3?(a>1&&(p.n=-1),y(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(a||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,a<2&&(a=0)}else 1===a&&(n=i.return)&&n.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=t}else if((n=(l=p.n<0)?c:r.call(e,p))!==u)break}catch(n){i=t,a=1,c=n}finally{s=1}}return{value:n,done:l}}}(r,o,a),!0),f}var u={};function s(){}function f(){}function l(){}n=Object.getPrototypeOf;var p=[][e]?n(n([][e]())):(i(n={},e,function(){return this}),n),y=l.prototype=s.prototype=Object.create(p);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,i(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t}return f.prototype=l,i(y,"constructor",l),i(l,"constructor",f),f.displayName="GeneratorFunction",i(l,a,"GeneratorFunction"),i(y),i(y,a,"Generator"),i(y,e,function(){return this}),i(y,"toString",function(){return"[object Generator]"}),(o=function(){return{w:c,m:v}})()}function i(t,n,r,e){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}i=function(t,n,r,e){function a(n,r){i(t,n,function(t){return this._invoke(n,r,t)})}n?o?o(t,n,{value:r,enumerable:!e,configurable:!e,writable:!e}):t[n]=r:(a("next",0),a("throw",1),a("return",2))},i(t,n,r,e)}function a(t,n,r,e,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?n(u):Promise.resolve(u).then(e,o)}function c(t){return function(){var n=this,r=arguments;return new Promise(function(e,o){var i=t.apply(n,r);function c(t){a(i,e,o,c,u,"next",t)}function u(t){a(i,e,o,c,u,"throw",t)}c(void 0)})}}const u={getStory:function(t){return c(o().m(function n(){return o().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,e.G;case 1:return n.a(2,n.v.get(e.O_,t))}},n)}))()},getAllStories:function(){return c(o().m(function t(){return o().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,e.G;case 1:return t.a(2,t.v.getAll(e.O_))}},t)}))()},putStory:function(t){return c(o().m(function n(){return o().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,e.G;case 1:return n.a(2,n.v.put(e.O_,t))}},n)}))()},deleteStory:function(t){return c(o().m(function n(){return o().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,e.G;case 1:return n.a(2,n.v.delete(e.O_,t))}},n)}))()}}},551:(t,n,r)=>{r.r(n),r.d(n,{default:()=>b}),r(481),r(849);var e=r(456),o=r(179),i=r(133);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function c(){var t,n,r="function"==typeof Symbol?Symbol:{},e=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,e,o,i){var c=e&&e.prototype instanceof s?e:s,f=Object.create(c.prototype);return u(f,"_invoke",function(r,e,o){var i,c,u,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,r){return i=n,c=0,u=t,p.n=r,a}};function y(r,e){for(c=r,u=e,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],y=p.p,v=i[2];r>3?(o=v===e)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(c=0,p.v=e,p.n=i[1]):y<v&&(o=r<3||i[0]>e||e>v)&&(i[4]=r,i[5]=e,p.n=v,c=0))}if(o||r>1)return a;throw l=!0,e}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),c=f,u=v;(n=c<2?t:u)||!l;){i||(c?c<3?(c>1&&(p.n=-1),y(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(c||(o="next"),n=i[o]){if(!(n=n.call(i,u)))throw TypeError("iterator result is not an object");if(!n.done)return n;u=n.value,c<2&&(c=0)}else 1===c&&(n=i.return)&&n.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((n=(l=p.n<0)?u:r.call(e,p))!==a)break}catch(n){i=t,c=1,u=n}finally{s=1}}return{value:n,done:l}}}(r,o,i),!0),f}var a={};function s(){}function f(){}function l(){}n=Object.getPrototypeOf;var p=[][e]?n(n([][e]())):(u(n={},e,function(){return this}),n),y=l.prototype=s.prototype=Object.create(p);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,u(t,o,"GeneratorFunction")),t.prototype=Object.create(y),t}return f.prototype=l,u(y,"constructor",l),u(l,"constructor",f),f.displayName="GeneratorFunction",u(l,o,"GeneratorFunction"),u(y),u(y,o,"Generator"),u(y,e,function(){return this}),u(y,"toString",function(){return"[object Generator]"}),(c=function(){return{w:i,m:v}})()}function u(t,n,r,e){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}u=function(t,n,r,e){function i(n,r){u(t,n,function(t){return this._invoke(n,r,t)})}n?o?o(t,n,{value:r,enumerable:!e,configurable:!e,writable:!e}):t[n]=r:(i("next",0),i("throw",1),i("return",2))},u(t,n,r,e)}function s(t,n,r,e,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?n(u):Promise.resolve(u).then(e,o)}function f(t){return function(){var n=this,r=arguments;return new Promise(function(e,o){var i=t.apply(n,r);function a(t){s(i,e,o,a,c,"next",t)}function c(t){s(i,e,o,a,c,"throw",t)}a(void 0)})}}function l(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,p(e.key),e)}}function p(t){var n=function(t){if("object"!=a(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==a(n)?n:n+""}function y(t,n){return t.get(d(t,n))}function v(t,n,r){return t.set(d(t,n),r),r}function d(t,n,r){if("function"==typeof t?t===n:t.has(n))return arguments.length<3?n:r;throw new TypeError("Private element is not present on this object")}var h=new WeakMap,b=function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,n,r){(function(t,n){if(n.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,n),n.set(t,r)}(this,h,null)},n=[{key:"render",value:(a=f(c().m(function t(){var n,r,a,u,s,f,l,p,d,b;return c().w(function(t){for(;;)switch(t.p=t.n){case 0:if(n=(0,o.U2)(),r=n.id){t.n=1;break}return t.a(2,'<div class="container">ID Cerita tidak ditemukan.</div>');case 1:return t.p=1,t.n=2,(0,e.Jb)(r);case 2:return a=t.v,t.n=3,a.json();case 3:u=t.v,v(h,this,u.story),t.n=6;break;case 4:return t.p=4,l=t.v,console.warn("Gagal fetch detail API, mencoba IndexedDB:",l),p=v,d=h,b=this,t.n=5,i.A.getStory(r);case 5:p(d,b,t.v);case 6:if(y(h,this)){t.n=7;break}return t.a(2,'<div class="container">Cerita tidak ditemukan. Pastikan Anda online atau cerita sudah difavoritkan.</div>');case 7:return t.n=8,i.A.getStory(r);case 8:return s=t.v,f=s?"‚ù§Ô∏è":"ü§ç",t.a(2,'\n      <section class="container story-detail-page">\n        <img class="story-photo" src="'.concat(y(h,this).photoUrl,'" alt="Foto cerita dari ').concat(y(h,this).name,'" />\n        <div class="story-info">\n          <h1>').concat(y(h,this).name,"</h1>\n          <p><strong>Deskripsi:</strong> ").concat(y(h,this).description,"</p>\n          <p><strong>Tanggal:</strong> ").concat(new Date(y(h,this).createdAt).toLocaleDateString(),'</p>\n          \n          <button id="like-button" class="like-button" aria-label="').concat(s?"Hapus dari favorit":"Tambahkan ke favorit",'">\n            ').concat(f," Favorit\n          </button>\n          \n          ").concat(y(h,this).lat&&y(h,this).lon?'\n            <div class="story-map-section">\n              <h2>Lokasi Cerita</h2>\n              <div id="map-container"></div>\n            </div>\n          ':"<p>Tidak ada data lokasi untuk cerita ini.</p>","\n        </div>\n      </section>\n    "))}},t,this,[[1,4]])})),function(){return a.apply(this,arguments)})},{key:"afterRender",value:(r=f(c().m(function t(){var n,r=this;return c().w(function(t){for(;;)switch(t.n){case 0:if(y(h,this)&&y(h,this).lat&&y(h,this).lon){t.n=1;break}return t.a(2);case 1:(n=document.getElementById("like-button"))&&n.addEventListener("click",f(c().m(function t(){return c().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,i.A.getStory(y(h,r).id);case 1:if(!t.v){t.n=3;break}return t.n=2,i.A.deleteStory(y(h,r).id);case 2:alert("Cerita dihapus dari favorit."),t.n=5;break;case 3:return t.n=4,i.A.putStory(y(h,r));case 4:alert("Cerita ditambahkan ke favorit.");case 5:window.location.reload();case 6:return t.a(2)}},t)})));case 2:return t.a(2)}},t,this)})),function(){return r.apply(this,arguments)})}],n&&l(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r,a}()},604:(t,n,r)=>{r.d(n,{G:()=>a,O_:()=>o,ai:()=>i});var e=r(602),o="story-favorites",i="story-sync",a=(0,e.P2)("dicoding-story-db",1,{upgrade:function(t){t.objectStoreNames.contains(o)||t.createObjectStore(o,{keyPath:"id"}),t.objectStoreNames.contains(i)||t.createObjectStore(i,{keyPath:"id",autoIncrement:!0})}})}}]);
//# sourceMappingURL=551.000f7327936e7965b203.js.map