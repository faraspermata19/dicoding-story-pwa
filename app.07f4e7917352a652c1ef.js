/*! For license information please see app.07f4e7917352a652c1ef.js.LICENSE.txt */
(()=>{"use strict";var t,e,n={59:(t,e,n)=>{n.d(e,{A:()=>r});const r={API_BASE_URL:"https://story-api.dicoding.dev/v1",VAPID_PUBLIC_KEY:"BCCs2eonMI-6H2ctvFaWg-UYdDv387Vno_bzUzALpB442r2lCnsHmtrx8biyPi_E-1fSGABK_Qs_GlvPoJJqxbk"}},179:(t,e,n)=>{function r(t){var e=t.split("/");return{resource:e[1]||null,id:e[2]||null}}function o(){return location.hash.replace("#","")||"/"}function i(){return t=r(o()),e="",t.resource&&(e=e.concat("/".concat(t.resource))),t.id&&(e=e.concat("/:id")),e||"/";var t,e}function a(){return r(o())}n.d(e,{EW:()=>i,U2:()=>a})},456:(t,e,n)=>{n.d(e,{$y:()=>O,Jb:()=>w,R7:()=>g,TU:()=>h,_N:()=>j,pH:()=>y,vG:()=>k});var r=n(59);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function u(n,r,o,i){var u=r&&r.prototype instanceof s?r:s,l=Object.create(u.prototype);return a(l,"_invoke",function(n,r,o){var i,a,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return i=e,a=0,u=t,p.n=n,c}};function d(n,r){for(a=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,i=l[e],d=p.p,h=i[2];n>3?(o=h===r)&&(u=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=d&&((o=n<2&&d<i[1])?(a=0,p.v=r,p.n=i[1]):d<h&&(o=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,p.n=h,a=0))}if(o||n>1)return c;throw f=!0,r}return function(o,l,h){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),a=l,u=h;(e=a<2?t:u)||!f;){i||(a?a<3?(a>1&&(p.n=-1),d(a,u)):p.n=u:p.v=u);try{if(s=2,i){if(a||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,a<2&&(a=0)}else 1===a&&(e=i.return)&&e.call(i),a<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==c)break}catch(e){i=t,a=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,i),!0),l}var c={};function s(){}function l(){}function f(){}e=Object.getPrototypeOf;var p=[][r]?e(e([][r]())):(a(e={},r,function(){return this}),e),d=f.prototype=s.prototype=Object.create(p);function h(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,a(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return l.prototype=f,a(d,"constructor",f),a(f,"constructor",l),l.displayName="GeneratorFunction",a(f,o,"GeneratorFunction"),a(d),a(d,o,"Generator"),a(d,r,function(){return this}),a(d,"toString",function(){return"[object Generator]"}),(i=function(){return{w:u,m:h}})()}function a(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}a=function(t,e,n,r){function i(e,n){a(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},a(t,e,n,r)}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach(function(e){s(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function s(t,e,n){return(e=function(t){var e=function(t){if("object"!=o(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==o(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function f(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){l(i,r,o,a,u,"next",t)}function u(t){l(i,r,o,a,u,"throw",t)}a(void 0)})}}function p(t){return d.apply(this,arguments)}function d(){return d=f(i().m(function t(e){var n,r,o=arguments;return i().w(function(t){for(;;)if(0===t.n)return n=o.length>1&&void 0!==o[1]?o[1]:{},(r=localStorage.getItem("loginResult")?JSON.parse(localStorage.getItem("loginResult")).token:null)&&(n.headers=c(c({},n.headers),{},{Authorization:"Bearer ".concat(r)}),"POST"===n.method&&n.body instanceof FormData&&delete n.headers["Content-Type"]),t.a(2,fetch(e,n))},t)})),d.apply(this,arguments)}function h(t){return v.apply(this,arguments)}function v(){return(v=f(i().m(function t(e){var n,o,a;return i().w(function(t){for(;;)if(0===t.n)return n=e.name,o=e.email,a=e.password,t.a(2,fetch("".concat(r.A.API_BASE_URL,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n,email:o,password:a})}))},t)}))).apply(this,arguments)}function y(t){return b.apply(this,arguments)}function b(){return(b=f(i().m(function t(e){var n,o;return i().w(function(t){for(;;)if(0===t.n)return n=e.email,o=e.password,t.a(2,fetch("".concat(r.A.API_BASE_URL,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:o})}))},t)}))).apply(this,arguments)}function g(){return m.apply(this,arguments)}function m(){return(m=f(i().m(function t(){var e;return i().w(function(t){for(;;)if(0===t.n)return e="".concat(r.A.API_BASE_URL,"/stories?location=1"),t.a(2,p(e))},t)}))).apply(this,arguments)}function w(t){return S.apply(this,arguments)}function S(){return(S=f(i().m(function t(e){var n;return i().w(function(t){for(;;)if(0===t.n)return n="".concat(r.A.API_BASE_URL,"/stories/").concat(e),t.a(2,p(n))},t)}))).apply(this,arguments)}function k(t){return P.apply(this,arguments)}function P(){return(P=f(i().m(function t(e){var n,o,a,u,c,s;return i().w(function(t){for(;;)if(0===t.n)return n=e.description,o=e.photo,a=e.lat,u=e.lon,(c=new FormData).append("description",n),c.append("photo",o),a&&u&&"undefined"!==a&&"undefined"!==u&&(c.append("lat",a),c.append("lon",u)),s="".concat(r.A.API_BASE_URL,"/stories"),t.a(2,p(s,{method:"POST",body:c}))},t)}))).apply(this,arguments)}function O(t){return _.apply(this,arguments)}function _(){return(_=f(i().m(function t(e){var n,o;return i().w(function(t){for(;;)switch(t.n){case 0:if(n=localStorage.getItem("loginResult")?JSON.parse(localStorage.getItem("loginResult")).token:null){t.n=1;break}throw new Error("User not logged in");case 1:return o={endpoint:e.endpoint,keys:e.toJSON().keys},t.a(2,fetch("".concat(r.A.API_BASE_URL,"/notifications/subscribe"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(o)}))}},t)}))).apply(this,arguments)}function j(t){return T.apply(this,arguments)}function T(){return(T=f(i().m(function t(e){var n;return i().w(function(t){for(;;)switch(t.n){case 0:if(n=localStorage.getItem("loginResult")?JSON.parse(localStorage.getItem("loginResult")).token:null){t.n=1;break}throw new Error("User not logged in");case 1:return t.a(2,fetch("".concat(r.A.API_BASE_URL,"/notifications/subscribe"),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({endpoint:e})}))}},t)}))).apply(this,arguments)}}},r={};function o(t){var e=r[t];if(void 0!==e)return e.exports;var i=r[t]={exports:{}};return n[t].call(i.exports,i,i.exports,o),i.exports}o.m=n,o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.f={},o.e=t=>Promise.all(Object.keys(o.f).reduce((e,n)=>(o.f[n](t,e),e),[])),o.u=t=>t+"."+{400:"9bb7c0502e7d7806ac1b",551:"000f7327936e7965b203",634:"0290f6aa3f15fb475b9c",645:"c46de07a782e07a9f92c",671:"fecba60e8e3fac30ddd9",688:"61eb311efc6199c8fdb6",887:"d6911baf3c590246c8a4",900:"992828504df05acbcd03"}[t]+".js",o.miniCssF=t=>{},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t={},e="dicoding-story-pwa:",o.l=(n,r,i,a)=>{if(t[n])t[n].push(r);else{var u,c;if(void 0!==i)for(var s=document.getElementsByTagName("script"),l=0;l<s.length;l++){var f=s[l];if(f.getAttribute("src")==n||f.getAttribute("data-webpack")==e+i){u=f;break}}u||(c=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,o.nc&&u.setAttribute("nonce",o.nc),u.setAttribute("data-webpack",e+i),u.src=n),t[n]=[r];var p=(e,r)=>{u.onerror=u.onload=null,clearTimeout(d);var o=t[n];if(delete t[n],u.parentNode&&u.parentNode.removeChild(u),o&&o.forEach(t=>t(r)),e)return e(r)},d=setTimeout(p.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=p.bind(null,u.onerror),u.onload=p.bind(null,u.onload),c&&document.head.appendChild(u)}},o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.p="/dicoding-story-pwa/",(()=>{var t={524:0};o.f.j=(e,n)=>{var r=o.o(t,e)?t[e]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise((n,o)=>r=t[e]=[n,o]);n.push(r[2]=i);var a=o.p+o.u(e),u=new Error;o.l(a,n=>{if(o.o(t,e)&&(0!==(r=t[e])&&(t[e]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;u.message="Loading chunk "+e+" failed.\n("+i+": "+a+")",u.name="ChunkLoadError",u.type=i,u.request=a,r[1](u)}},"chunk-"+e,e)}};var e=(e,n)=>{var r,i,[a,u,c]=n,s=0;if(a.some(e=>0!==t[e])){for(r in u)o.o(u,r)&&(o.m[r]=u[r]);c&&c(o)}for(e&&e(n);s<a.length;s++)i=a[s],o.o(t,i)&&t[i]&&t[i][0](),t[i]=0},n=self.webpackChunkdicoding_story_pwa=self.webpackChunkdicoding_story_pwa||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})();const i={"/":function(){return o.e(887).then(o.bind(o,887))},"/about":function(){return o.e(671).then(o.bind(o,671))},"/stories/:id":function(){return Promise.all([o.e(634),o.e(551)]).then(o.bind(o,551))},"/add":function(){return Promise.all([o.e(634),o.e(688)]).then(o.bind(o,688))},"/login":function(){return o.e(900).then(o.bind(o,900))},"/register":function(){return o.e(400).then(o.bind(o,400))},"/favorites":function(){return o.e(645).then(o.bind(o,645))}};var a=o(179),u=o(59),c=o(456);function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function l(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return f(s,"_invoke",function(n,r,o){var i,u,c,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function d(n,r){for(u=n,c=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,i=l[e],d=p.p,h=i[2];n>3?(o=h===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=d&&((o=n<2&&d<i[1])?(u=0,p.v=r,p.n=i[1]):d<h&&(o=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,p.n=h,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,h){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),u=l,c=h;(e=u<2?t:c)||!f;){i||(u?u<3?(u>1&&(p.n=-1),d(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(f=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:f}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var p=[][r]?e(e([][r]())):(f(e={},r,function(){return this}),e),d=s.prototype=u.prototype=Object.create(p);function h(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,f(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return c.prototype=s,f(d,"constructor",s),f(s,"constructor",c),c.displayName="GeneratorFunction",f(s,o,"GeneratorFunction"),f(d),f(d,o,"Generator"),f(d,r,function(){return this}),f(d,"toString",function(){return"[object Generator]"}),(l=function(){return{w:i,m:h}})()}function f(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}f=function(t,e,n,r){function i(e,n){f(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},f(t,e,n,r)}function p(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function d(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){p(i,r,o,a,u,"next",t)}function u(t){p(i,r,o,a,u,"throw",t)}a(void 0)})}}var h=u.A.VAPID_PUBLIC_KEY,v=(u.A.API_BASE_URL,window.location.hostname),y="localhost"===v||"127.0.0.1"===v||v.startsWith("192.")||v.startsWith("172.")||v.startsWith("10.")?"/":"/dicoding-story-pwa/",b=function(){var t=d(l().m(function t(){var e,n;return l().w(function(t){for(;;)switch(t.p=t.n){case 0:if("serviceWorker"in navigator){t.n=1;break}return console.log("Service Worker not supported in the browser"),t.a(2,null);case 1:return t.p=1,t.n=2,navigator.serviceWorker.register("".concat(y,"sw.js"),{scope:y});case 2:return e=t.v,console.log("Service worker registered successfully",e),t.a(2,e);case 3:return t.p=3,n=t.v,console.error("Failed to register service worker",n),t.a(2,null)}},t,null,[[1,3]])}));return function(){return t.apply(this,arguments)}}(),g=function(t){var e,n=(t+"=".repeat((4-t.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),r=window.atob(n);return Uint8Array.from((e=r,function(t){if(Array.isArray(t))return s(t)}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return s(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map(function(t){return t.charCodeAt(0)}))},m=function(){var t=d(l().m(function t(e){var n,r,o,i;return l().w(function(t){for(;;)switch(t.p=t.n){case 0:if(e){t.n=1;break}return t.a(2,!1);case 1:if("denied"!==Notification.permission){t.n=2;break}return t.a(2,!1);case 2:return t.n=3,Notification.requestPermission();case 3:if("granted"===t.v){t.n=4;break}return t.a(2,!1);case 4:return t.p=4,t.n=5,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:g(h)});case 5:return n=t.v,t.n=6,(0,c.$y)(n);case 6:return r=t.v,t.n=7,r.json();case 7:return o=t.v,t.a(2,!o.error);case 8:return t.p=8,i=t.v,console.error(i),t.a(2,!1)}},t,null,[[4,8]])}));return function(e){return t.apply(this,arguments)}}(),w=function(){var t=d(l().m(function t(e){var n;return l().w(function(t){for(;;)switch(t.n){case 0:if(e){t.n=1;break}return t.a(2,!1);case 1:return t.n=2,e.pushManager.getSubscription();case 2:if(!(n=t.v)){t.n=4;break}return t.n=3,(0,c._N)(n.endpoint);case 3:return t.a(2,n.unsubscribe());case 4:return t.a(2,!1)}},t)}));return function(e){return t.apply(this,arguments)}}(),S=function(){var t=d(l().m(function t(e){var n;return l().w(function(t){for(;;)switch(t.n){case 0:if("PushManager"in window){t.n=1;break}return t.a(2,!1);case 1:return t.n=2,e.pushManager.getSubscription();case 2:return n=t.v,t.a(2,!!n)}},t)}));return function(e){return t.apply(this,arguments)}}();function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function P(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return O(s,"_invoke",function(n,r,o){var i,u,c,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function d(n,r){for(u=n,c=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,i=l[e],d=p.p,h=i[2];n>3?(o=h===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=d&&((o=n<2&&d<i[1])?(u=0,p.v=r,p.n=i[1]):d<h&&(o=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,p.n=h,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,h){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),u=l,c=h;(e=u<2?t:c)||!f;){i||(u?u<3?(u>1&&(p.n=-1),d(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(f=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:f}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(O(e={},r,function(){return this}),e),f=s.prototype=u.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,O(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return c.prototype=s,O(f,"constructor",s),O(s,"constructor",c),c.displayName="GeneratorFunction",O(s,o,"GeneratorFunction"),O(f),O(f,o,"Generator"),O(f,r,function(){return this}),O(f,"toString",function(){return"[object Generator]"}),(P=function(){return{w:i,m:p}})()}function O(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}O=function(t,e,n,r){function i(e,n){O(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},O(t,e,n,r)}function _(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function j(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){_(i,r,o,a,u,"next",t)}function u(t){_(i,r,o,a,u,"throw",t)}a(void 0)})}}function T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,A(r.key),r)}}function E(t,e,n){return(e=A(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function A(t){var e=function(t){if("object"!=k(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==k(e)?e:e+""}function L(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function R(t,e){return t.get(C(t,e))}function I(t,e,n){return t.set(C(t,e),n),n}function C(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var G=new WeakMap,M=new WeakMap,N=new WeakMap,B=new WeakMap,W=new WeakMap,U=new WeakMap,x=new WeakMap;const F=function(){return t=function t(e){var n=e.navigationDrawer,r=e.drawerButton,o=e.content,i=e.pushToggle;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),L(this,G,null),L(this,M,null),L(this,N,null),L(this,B,null),L(this,W,null),L(this,U,null),L(this,x,null),E(this,"deferredInstallPrompt",null),E(this,"swRegistration",null),I(G,this,o),I(M,this,r),I(N,this,n),I(B,this,R(N,this).querySelector("#nav-list")),I(W,this,i),I(U,this,R(N,this).querySelector("#install-app-wrapper")),I(x,this,R(N,this).querySelector("#install-app-button")),this._setupDrawer(),this._registerServiceWorker(),R(W,this)&&this._setupPushToggle(),this._setupA2HS()},e=[{key:"_registerServiceWorker",value:(u=j(P().m(function t(){return P().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,b();case 1:this.swRegistration=t.v,this.swRegistration&&this._updatePushToggleState();case 2:return t.a(2)}},t,this)})),function(){return u.apply(this,arguments)})},{key:"_setupPushToggle",value:function(){var t=this;R(W,this).addEventListener("change",function(){var e=j(P().m(function e(n){var r;return P().w(function(e){for(;;)switch(e.n){case 0:if(r=n.target.checked,t.swRegistration){e.n=1;break}return console.error("ERROR: Service Worker belum terdaftar."),n.target.checked=!1,e.a(2);case 1:if(localStorage.getItem("loginResult")){e.n=2;break}return console.warn("WARNING: Anda harus login untuk mengaktifkan notifikasi."),n.target.checked=!1,e.a(2);case 2:if(!r){e.n=4;break}return e.n=3,m(t.swRegistration);case 3:e.v||(n.target.checked=!1),e.n=5;break;case 4:return e.n=5,w(t.swRegistration);case 5:t._updatePushToggleState();case 6:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}())}},{key:"_updatePushToggleState",value:(r=j(P().m(function t(){var e;return P().w(function(t){for(;;)switch(t.n){case 0:if(R(W,this)){t.n=1;break}return t.a(2);case 1:if(this.swRegistration&&localStorage.getItem("loginResult")){t.n=2;break}return R(W,this).checked=!1,R(W,this).disabled=!0,t.a(2);case 2:return R(W,this).disabled=!1,t.n=3,S(this.swRegistration);case 3:e=t.v,R(W,this).checked=e;case 4:return t.a(2)}},t,this)})),function(){return r.apply(this,arguments)})},{key:"_setupA2HS",value:function(){var t=this;window.addEventListener("beforeinstallprompt",function(e){e.preventDefault(),t.deferredInstallPrompt=e,R(U,t)&&(R(U,t).style.display="block"),console.log("beforeinstallprompt event di-tangkap. Tombol install muncul.")}),R(x,this)&&R(x,this).addEventListener("click",j(P().m(function e(){var n,r;return P().w(function(e){for(;;)switch(e.n){case 0:if(!t.deferredInstallPrompt){e.n=2;break}return t.deferredInstallPrompt.prompt(),e.n=1,t.deferredInstallPrompt.userChoice;case 1:n=e.v,r=n.outcome,console.log("User response to the install prompt: ".concat(r)),R(U,t)&&(R(U,t).style.display="none"),t.deferredInstallPrompt=null;case 2:return e.a(2)}},e)}))),window.addEventListener("appinstalled",function(){console.log("PWA berhasil diinstal!"),R(U,t)&&(R(U,t).style.display="none")})}},{key:"_setupDrawer",value:function(){var t=this;R(M,this).addEventListener("click",function(){R(N,t).classList.toggle("open")}),document.body.addEventListener("click",function(e){R(N,t).contains(e.target)||R(M,t).contains(e.target)||R(N,t).classList.remove("open"),R(N,t).querySelectorAll("a").forEach(function(n){n.contains(e.target)&&R(N,t).classList.remove("open")})})}},{key:"_renderNavigation",value:function(){var t=this,e=localStorage.getItem("loginResult");R(B,this).innerHTML="";var n=document.createElement("li");n.innerHTML='<a href="#/">Beranda</a>',R(B,this).appendChild(n);var r=document.createElement("li");r.innerHTML='<a href="#/favorites">Favorit</a>',R(B,this).appendChild(r);var o=document.createElement("li");if(o.innerHTML='<a href="#/about">About</a>',R(B,this).appendChild(o),e){var i=document.createElement("li");i.innerHTML='<a href="#/add">Tambah Cerita</a>',R(B,this).appendChild(i);var a=document.createElement("li");a.innerHTML='<a href="#" id="logout-link">Logout</a>',R(B,this).appendChild(a),a.addEventListener("click",function(){localStorage.removeItem("loginResult"),t.swRegistration?w(t.swRegistration).then(function(){window.location.hash="#/login"}):window.location.hash="#/login"})}else{var u=document.createElement("li");u.innerHTML='<a href="#/login">Login</a>',R(B,this).appendChild(u)}this._updatePushToggleState()}},{key:"renderPage",value:(n=j(P().m(function t(){var e,n,r,u,c,s,l=this;return P().w(function(t){for(;;)switch(t.n){case 0:if(this._renderNavigation(),e=(0,a.EW)(),n=i[e],r=localStorage.getItem("loginResult"),!["/","/add"].includes(e)||r){t.n=2;break}return t.n=1,o.e(900).then(o.bind(o,900));case 1:c=t.v,u=new c.default,t.n=5;break;case 2:if(!n){t.n=4;break}return t.n=3,n();case 3:s=t.v,u=new s.default,t.n=5;break;case 4:return R(G,this).innerHTML='<div class="container"><h1>404 Not Found</h1><p>Halaman tidak ditemukan.</p></div>',t.a(2);case 5:if(document.startViewTransition){t.n=8;break}return t.n=6,u.render();case 6:return R(G,this).innerHTML=t.v,t.n=7,u.afterRender();case 7:return t.a(2);case 8:document.startViewTransition(j(P().m(function t(){return P().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,u.render();case 1:return R(G,l).innerHTML=t.v,t.n=2,u.afterRender();case 2:return t.a(2)}},t)})));case 9:return t.a(2)}},t,this)})),function(){return n.apply(this,arguments)})}],e&&T(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r,u}();function D(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return H(s,"_invoke",function(n,r,o){var i,u,c,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function d(n,r){for(u=n,c=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,i=l[e],d=p.p,h=i[2];n>3?(o=h===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=d&&((o=n<2&&d<i[1])?(u=0,p.v=r,p.n=i[1]):d<h&&(o=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,p.n=h,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,h){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),u=l,c=h;(e=u<2?t:c)||!f;){i||(u?u<3?(u>1&&(p.n=-1),d(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(f=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:f}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(H(e={},r,function(){return this}),e),f=s.prototype=u.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,H(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return c.prototype=s,H(f,"constructor",s),H(s,"constructor",c),c.displayName="GeneratorFunction",H(s,o,"GeneratorFunction"),H(f),H(f,o,"Generator"),H(f,r,function(){return this}),H(f,"toString",function(){return"[object Generator]"}),(D=function(){return{w:i,m:p}})()}function H(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}H=function(t,e,n,r){function i(e,n){H(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},H(t,e,n,r)}function q(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function J(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){q(i,r,o,a,u,"next",t)}function u(t){q(i,r,o,a,u,"throw",t)}a(void 0)})}}document.addEventListener("DOMContentLoaded",J(D().m(function t(){var e;return D().w(function(t){for(;;)switch(t.n){case 0:return e=new F({content:document.querySelector("#main-content"),drawerButton:document.querySelector("#drawer-button"),navigationDrawer:document.querySelector("#navigation-drawer"),pushToggle:document.querySelector("#push-notification-toggle")}),t.n=1,e.renderPage();case 1:window.addEventListener("hashchange",J(D().m(function t(){return D().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,e.renderPage();case 1:return t.a(2)}},t)})));case 2:return t.a(2)}},t)})))})();
//# sourceMappingURL=app.07f4e7917352a652c1ef.js.map