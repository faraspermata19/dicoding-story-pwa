/*! For license information please see app.a9b9f610d94a0218dc4c.js.LICENSE.txt */
(()=>{"use strict";var e,t,n={59:(e,t,n)=>{n.d(t,{A:()=>r});const r={API_BASE_URL:"https://story-api.dicoding.dev/v1",VAPID_PUBLIC_KEY:"BCCs2eonMI-6H2ctvFaWg-UYdDv387Vno_bzUzALpB442r2lCnsHmtrx8biyPi_E-1fSGABK_Qs_GlvPoJJqxbk"}},179:(e,t,n)=>{function r(e){var t=e.split("/");return{resource:t[1]||null,id:t[2]||null}}function o(){return location.hash.replace("#","")||"/"}function i(){return e=r(o()),t="",e.resource&&(t=t.concat("/".concat(e.resource))),e.id&&(t=t.concat("/:id")),t||"/";var e,t}function a(){return r(o())}n.d(t,{EW:()=>i,U2:()=>a})},456:(e,t,n)=>{n.d(t,{$y:()=>O,Jb:()=>w,R7:()=>g,TU:()=>h,_N:()=>j,pH:()=>y,vG:()=>S});var r=n(59);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function u(n,r,o,i){var u=r&&r.prototype instanceof s?r:s,l=Object.create(u.prototype);return a(l,"_invoke",function(n,r,o){var i,a,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return i=t,a=0,u=e,p.n=n,c}};function d(n,r){for(a=n,u=r,t=0;!f&&s&&!o&&t<l.length;t++){var o,i=l[t],d=p.p,h=i[2];n>3?(o=h===r)&&(u=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=n<2&&d<i[1])?(a=0,p.v=r,p.n=i[1]):d<h&&(o=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,p.n=h,a=0))}if(o||n>1)return c;throw f=!0,r}return function(o,l,h){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),a=l,u=h;(t=a<2?e:u)||!f;){i||(a?a<3?(a>1&&(p.n=-1),d(a,u)):p.n=u:p.v=u);try{if(s=2,i){if(a||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,a<2&&(a=0)}else 1===a&&(t=i.return)&&t.call(i),a<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=e}else if((t=(f=p.n<0)?u:n.call(r,p))!==c)break}catch(t){i=e,a=1,u=t}finally{s=1}}return{value:t,done:f}}}(n,o,i),!0),l}var c={};function s(){}function l(){}function f(){}t=Object.getPrototypeOf;var p=[][r]?t(t([][r]())):(a(t={},r,function(){return this}),t),d=f.prototype=s.prototype=Object.create(p);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,a(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=f,a(d,"constructor",f),a(f,"constructor",l),l.displayName="GeneratorFunction",a(f,o,"GeneratorFunction"),a(d),a(d,o,"Generator"),a(d,r,function(){return this}),a(d,"toString",function(){return"[object Generator]"}),(i=function(){return{w:u,m:h}})()}function a(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,n,r){function i(t,n){a(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},a(e,t,n,r)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function s(e,t,n){return(t=function(e){var t=function(e){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function f(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){l(i,r,o,a,u,"next",e)}function u(e){l(i,r,o,a,u,"throw",e)}a(void 0)})}}function p(e){return d.apply(this,arguments)}function d(){return d=f(i().m(function e(t){var n,r,o=arguments;return i().w(function(e){for(;;)if(0===e.n)return n=o.length>1&&void 0!==o[1]?o[1]:{},(r=localStorage.getItem("loginResult")?JSON.parse(localStorage.getItem("loginResult")).token:null)&&(n.headers=c(c({},n.headers),{},{Authorization:"Bearer ".concat(r)}),"POST"===n.method&&n.body instanceof FormData&&delete n.headers["Content-Type"]),e.a(2,fetch(t,n))},e)})),d.apply(this,arguments)}function h(e){return v.apply(this,arguments)}function v(){return(v=f(i().m(function e(t){var n,o,a;return i().w(function(e){for(;;)if(0===e.n)return n=t.name,o=t.email,a=t.password,e.a(2,fetch("".concat(r.A.API_BASE_URL,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n,email:o,password:a})}))},e)}))).apply(this,arguments)}function y(e){return b.apply(this,arguments)}function b(){return(b=f(i().m(function e(t){var n,o;return i().w(function(e){for(;;)if(0===e.n)return n=t.email,o=t.password,e.a(2,fetch("".concat(r.A.API_BASE_URL,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:o})}))},e)}))).apply(this,arguments)}function g(){return m.apply(this,arguments)}function m(){return(m=f(i().m(function e(){var t;return i().w(function(e){for(;;)if(0===e.n)return t="".concat(r.A.API_BASE_URL,"/stories?location=1"),e.a(2,p(t))},e)}))).apply(this,arguments)}function w(e){return k.apply(this,arguments)}function k(){return(k=f(i().m(function e(t){var n;return i().w(function(e){for(;;)if(0===e.n)return n="".concat(r.A.API_BASE_URL,"/stories/").concat(t),e.a(2,p(n))},e)}))).apply(this,arguments)}function S(e){return P.apply(this,arguments)}function P(){return(P=f(i().m(function e(t){var n,o,a,u,c,s;return i().w(function(e){for(;;)if(0===e.n)return n=t.description,o=t.photo,a=t.lat,u=t.lon,(c=new FormData).append("description",n),c.append("photo",o),a&&u&&"undefined"!==a&&"undefined"!==u&&(c.append("lat",a),c.append("lon",u)),s="".concat(r.A.API_BASE_URL,"/stories"),e.a(2,p(s,{method:"POST",body:c}))},e)}))).apply(this,arguments)}function O(e){return _.apply(this,arguments)}function _(){return(_=f(i().m(function e(t){var n,o;return i().w(function(e){for(;;)switch(e.n){case 0:if(n=localStorage.getItem("loginResult")?JSON.parse(localStorage.getItem("loginResult")).token:null){e.n=1;break}throw new Error("User not logged in");case 1:return o={endpoint:t.endpoint,keys:t.toJSON().keys},e.a(2,fetch("".concat(r.A.API_BASE_URL,"/notifications/subscribe"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(o)}))}},e)}))).apply(this,arguments)}function j(e){return T.apply(this,arguments)}function T(){return(T=f(i().m(function e(t){var n;return i().w(function(e){for(;;)switch(e.n){case 0:if(n=localStorage.getItem("loginResult")?JSON.parse(localStorage.getItem("loginResult")).token:null){e.n=1;break}throw new Error("User not logged in");case 1:return e.a(2,fetch("".concat(r.A.API_BASE_URL,"/notifications/subscribe"),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({endpoint:t})}))}},e)}))).apply(this,arguments)}}},r={};function o(e){var t=r[e];if(void 0!==t)return t.exports;var i=r[e]={exports:{}};return n[e].call(i.exports,i,i.exports,o),i.exports}o.m=n,o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce((t,n)=>(o.f[n](e,t),t),[])),o.u=e=>e+"."+{400:"77224fed7547cf423735",551:"36bdef082ff38c58f4ea",634:"836674db7f76ccaa568b",671:"e56dded4b2c6eb9318b3",688:"2488a0345669876c0ed9",887:"c8f7fd3e092f84c7c4e5",900:"a1c1d1adf637cd430866"}[e]+".js",o.miniCssF=e=>{},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="app-starter-project-with-webpack:",o.l=(n,r,i,a)=>{if(e[n])e[n].push(r);else{var u,c;if(void 0!==i)for(var s=document.getElementsByTagName("script"),l=0;l<s.length;l++){var f=s[l];if(f.getAttribute("src")==n||f.getAttribute("data-webpack")==t+i){u=f;break}}u||(c=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,o.nc&&u.setAttribute("nonce",o.nc),u.setAttribute("data-webpack",t+i),u.src=n),e[n]=[r];var p=(t,r)=>{u.onerror=u.onload=null,clearTimeout(d);var o=e[n];if(delete e[n],u.parentNode&&u.parentNode.removeChild(u),o&&o.forEach(e=>e(r)),t)return t(r)},d=setTimeout(p.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=p.bind(null,u.onerror),u.onload=p.bind(null,u.onload),c&&document.head.appendChild(u)}},o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.p="/dicoding-story-pwa/",(()=>{var e={524:0};o.f.j=(t,n)=>{var r=o.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise((n,o)=>r=e[t]=[n,o]);n.push(r[2]=i);var a=o.p+o.u(t),u=new Error;o.l(a,n=>{if(o.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;u.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",u.name="ChunkLoadError",u.type=i,u.request=a,r[1](u)}},"chunk-"+t,t)}};var t=(t,n)=>{var r,i,[a,u,c]=n,s=0;if(a.some(t=>0!==e[t])){for(r in u)o.o(u,r)&&(o.m[r]=u[r]);c&&c(o)}for(t&&t(n);s<a.length;s++)i=a[s],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self.webpackChunkapp_starter_project_with_webpack=self.webpackChunkapp_starter_project_with_webpack||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();const i={"/":function(){return o.e(887).then(o.bind(o,887))},"/about":function(){return o.e(671).then(o.bind(o,671))},"/stories/:id":function(){return Promise.all([o.e(634),o.e(551)]).then(o.bind(o,551))},"/add":function(){return Promise.all([o.e(634),o.e(688)]).then(o.bind(o,688))},"/login":function(){return o.e(900).then(o.bind(o,900))},"/register":function(){return o.e(400).then(o.bind(o,400))}};var a=o(179),u=o(59),c=o(456);function s(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return l(s,"_invoke",function(n,r,o){var i,u,c,s=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return i=t,u=0,c=e,p.n=n,a}};function d(n,r){for(u=n,c=r,t=0;!f&&s&&!o&&t<l.length;t++){var o,i=l[t],d=p.p,h=i[2];n>3?(o=h===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=n<2&&d<i[1])?(u=0,p.v=r,p.n=i[1]):d<h&&(o=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,p.n=h,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,h){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),u=l,c=h;(t=u<2?e:c)||!f;){i||(u?u<3?(u>1&&(p.n=-1),d(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?c:n.call(r,p))!==a)break}catch(t){i=e,u=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function f(){}t=Object.getPrototypeOf;var p=[][r]?t(t([][r]())):(l(t={},r,function(){return this}),t),d=f.prototype=u.prototype=Object.create(p);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=f,l(d,"constructor",f),l(f,"constructor",c),c.displayName="GeneratorFunction",l(f,o,"GeneratorFunction"),l(d),l(d,o,"Generator"),l(d,r,function(){return this}),l(d,"toString",function(){return"[object Generator]"}),(s=function(){return{w:i,m:h}})()}function l(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}l=function(e,t,n,r){function i(t,n){l(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},l(e,t,n,r)}function f(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function p(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){f(i,r,o,a,u,"next",e)}function u(e){f(i,r,o,a,u,"throw",e)}a(void 0)})}}var d=u.A.VAPID_PUBLIC_KEY,h=(u.A.API_BASE_URL,"/dicoding-story-pwa/"),v=function(){var e=p(s().m(function e(){var t,n;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:if("serviceWorker"in navigator){e.n=1;break}return console.log("Service Worker not supported in the browser"),e.a(2,null);case 1:return e.p=1,e.n=2,navigator.serviceWorker.register(h+"sw.js",{scope:h});case 2:return t=e.v,console.log("Service worker registered successfully",t),e.a(2,t);case 3:return e.p=3,n=e.v,console.log("Failed to register service worker",n),e.a(2,null)}},e,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}(),y=function(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(t),r=new Uint8Array(n.length),o=0;o<n.length;++o)r[o]=n.charCodeAt(o);return r},b=function(){var e=p(s().m(function e(t){var n,r,o,i;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:if(localStorage.getItem("loginResult")){e.n=1;break}return console.error("User not logged in, cannot subscribe."),e.a(2,!1);case 1:if("denied"!==Notification.permission){e.n=2;break}return console.warn("Izin Notifikasi ditolak. Harap ubah di pengaturan browser Anda."),e.a(2,!1);case 2:if("granted"===Notification.permission){e.n=4;break}return e.n=3,Notification.requestPermission();case 3:if("granted"===e.v){e.n=4;break}return e.a(2,!1);case 4:return e.p=4,e.n=5,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:y(d)});case 5:return n=e.v,e.n=6,(0,c.$y)(n);case 6:return r=e.v,e.n=7,r.json();case 7:if((o=e.v).error){e.n=8;break}return console.log("Push subscription successfully sent to server.",o),e.a(2,!0);case 8:return console.error("Failed to send push subscription to server:",o.message),e.a(2,!1);case 9:e.n=11;break;case 10:return e.p=10,i=e.v,console.error("Error during push subscription:",i),e.a(2,!1);case 11:return e.a(2)}},e,null,[[4,10]])}));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=p(s().m(function e(t){var n,r;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:if(localStorage.getItem("loginResult")){e.n=1;break}return e.a(2,!1);case 1:return e.p=1,e.n=2,t.pushManager.getSubscription();case 2:if(!(n=e.v)){e.n=5;break}return e.n=3,(0,c._N)(n.endpoint);case 3:return e.n=4,n.unsubscribe();case 4:if(!e.v){e.n=5;break}return console.log("Push unsubscribed successfully locally and from server."),e.a(2,!0);case 5:return console.log("Not subscribed to push notifications."),e.a(2,!1);case 6:return e.p=6,r=e.v,console.error("Error unsubscribing push notification:",r),e.a(2,!1)}},e,null,[[1,6]])}));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=p(s().m(function e(t){var n;return s().w(function(e){for(;;)switch(e.n){case 0:if("PushManager"in window){e.n=1;break}return e.a(2,!1);case 1:return e.n=2,t.pushManager.getSubscription();case 2:return n=e.v,e.a(2,!!n)}},e)}));return function(t){return e.apply(this,arguments)}}();function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function k(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return S(s,"_invoke",function(n,r,o){var i,u,c,s=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return i=t,u=0,c=e,p.n=n,a}};function d(n,r){for(u=n,c=r,t=0;!f&&s&&!o&&t<l.length;t++){var o,i=l[t],d=p.p,h=i[2];n>3?(o=h===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=n<2&&d<i[1])?(u=0,p.v=r,p.n=i[1]):d<h&&(o=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,p.n=h,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,h){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),u=l,c=h;(t=u<2?e:c)||!f;){i||(u?u<3?(u>1&&(p.n=-1),d(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?c:n.call(r,p))!==a)break}catch(t){i=e,u=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(S(t={},r,function(){return this}),t),f=s.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,S(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,S(f,"constructor",s),S(s,"constructor",c),c.displayName="GeneratorFunction",S(s,o,"GeneratorFunction"),S(f),S(f,o,"Generator"),S(f,r,function(){return this}),S(f,"toString",function(){return"[object Generator]"}),(k=function(){return{w:i,m:p}})()}function S(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}S=function(e,t,n,r){function i(t,n){S(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},S(e,t,n,r)}function P(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function O(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){P(i,r,o,a,u,"next",e)}function u(e){P(i,r,o,a,u,"throw",e)}a(void 0)})}}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,T(r.key),r)}}function j(e,t,n){return(t=T(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e){var t=function(e){if("object"!=w(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==w(t)?t:t+""}function E(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function A(e,t){return e.get(R(e,t))}function L(e,t,n){return e.set(R(e,t),n),n}function R(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var I=new WeakMap,G=new WeakMap,C=new WeakMap,N=new WeakMap,M=new WeakMap,B=new WeakMap,U=new WeakMap;const x=function(){return e=function e(t){var n=t.navigationDrawer,r=t.drawerButton,o=t.content,i=t.pushToggle;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),E(this,I,null),E(this,G,null),E(this,C,null),E(this,N,null),E(this,M,null),E(this,B,null),E(this,U,null),j(this,"deferredInstallPrompt",null),j(this,"swRegistration",null),L(I,this,o),L(G,this,r),L(C,this,n),L(N,this,A(C,this).querySelector("#nav-list")),L(M,this,i),L(B,this,A(C,this).querySelector("#install-app-wrapper")),L(U,this,A(C,this).querySelector("#install-app-button")),this._setupDrawer(),this._registerServiceWorker(),A(M,this)&&this._setupPushToggle(),this._setupA2HS()},t=[{key:"_registerServiceWorker",value:(u=O(k().m(function e(){return k().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,v();case 1:this.swRegistration=e.v,this.swRegistration&&this._updatePushToggleState();case 2:return e.a(2)}},e,this)})),function(){return u.apply(this,arguments)})},{key:"_setupPushToggle",value:function(){var e=this;A(M,this).addEventListener("change",function(){var t=O(k().m(function t(n){var r;return k().w(function(t){for(;;)switch(t.n){case 0:if(r=n.target.checked,e.swRegistration){t.n=1;break}return console.error("ERROR: Service Worker belum terdaftar."),n.target.checked=!1,t.a(2);case 1:if(localStorage.getItem("loginResult")){t.n=2;break}return console.warn("WARNING: Anda harus login untuk mengaktifkan notifikasi."),n.target.checked=!1,t.a(2);case 2:if(!r){t.n=4;break}return t.n=3,b(e.swRegistration);case 3:t.v||(n.target.checked=!1),t.n=5;break;case 4:return t.n=5,g(e.swRegistration);case 5:e._updatePushToggleState();case 6:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}())}},{key:"_updatePushToggleState",value:(r=O(k().m(function e(){var t;return k().w(function(e){for(;;)switch(e.n){case 0:if(A(M,this)){e.n=1;break}return e.a(2);case 1:if(this.swRegistration&&localStorage.getItem("loginResult")){e.n=2;break}return A(M,this).checked=!1,A(M,this).disabled=!0,e.a(2);case 2:return A(M,this).disabled=!1,e.n=3,m(this.swRegistration);case 3:t=e.v,A(M,this).checked=t;case 4:return e.a(2)}},e,this)})),function(){return r.apply(this,arguments)})},{key:"_setupA2HS",value:function(){var e=this;window.addEventListener("beforeinstallprompt",function(t){t.preventDefault(),e.deferredInstallPrompt=t,A(B,e)&&(A(B,e).style.display="block"),console.log("beforeinstallprompt event di-tangkap. Tombol install muncul.")}),A(U,this)&&A(U,this).addEventListener("click",O(k().m(function t(){var n,r;return k().w(function(t){for(;;)switch(t.n){case 0:if(!e.deferredInstallPrompt){t.n=2;break}return e.deferredInstallPrompt.prompt(),t.n=1,e.deferredInstallPrompt.userChoice;case 1:n=t.v,r=n.outcome,console.log("User response to the install prompt: ".concat(r)),A(B,e)&&(A(B,e).style.display="none"),e.deferredInstallPrompt=null;case 2:return t.a(2)}},t)}))),window.addEventListener("appinstalled",function(){console.log("PWA berhasil diinstal!"),A(B,e)&&(A(B,e).style.display="none")})}},{key:"_setupDrawer",value:function(){var e=this;A(G,this).addEventListener("click",function(){A(C,e).classList.toggle("open")}),document.body.addEventListener("click",function(t){A(C,e).contains(t.target)||A(G,e).contains(t.target)||A(C,e).classList.remove("open"),A(C,e).querySelectorAll("a").forEach(function(n){n.contains(t.target)&&A(C,e).classList.remove("open")})})}},{key:"_renderNavigation",value:function(){var e=this,t=localStorage.getItem("loginResult");A(N,this).innerHTML="";var n=document.createElement("li");n.innerHTML='<a href="#/">Beranda</a>',A(N,this).appendChild(n);var r=document.createElement("li");if(r.innerHTML='<a href="#/about">About</a>',A(N,this).appendChild(r),t){var o=document.createElement("li");o.innerHTML='<a href="#/add">Tambah Cerita</a>',A(N,this).appendChild(o);var i=document.createElement("li");i.innerHTML='<a href="#" id="logout-link">Logout</a>',A(N,this).appendChild(i),i.addEventListener("click",function(){localStorage.removeItem("loginResult"),e.swRegistration?g(e.swRegistration).then(function(){window.location.hash="#/login"}):window.location.hash="#/login"})}else{var a=document.createElement("li");a.innerHTML='<a href="#/login">Login</a>',A(N,this).appendChild(a)}this._updatePushToggleState()}},{key:"renderPage",value:(n=O(k().m(function e(){var t,n,r,u,c,s,l=this;return k().w(function(e){for(;;)switch(e.n){case 0:if(this._renderNavigation(),t=(0,a.EW)(),n=i[t],r=localStorage.getItem("loginResult"),!["/","/add"].includes(t)||r){e.n=2;break}return e.n=1,o.e(900).then(o.bind(o,900));case 1:c=e.v,u=new c.default,e.n=5;break;case 2:if(!n){e.n=4;break}return e.n=3,n();case 3:s=e.v,u=new s.default,e.n=5;break;case 4:return A(I,this).innerHTML='<div class="container"><h1>404 Not Found</h1><p>Halaman tidak ditemukan.</p></div>',e.a(2);case 5:if(document.startViewTransition){e.n=8;break}return e.n=6,u.render();case 6:return A(I,this).innerHTML=e.v,e.n=7,u.afterRender();case 7:return e.a(2);case 8:document.startViewTransition(O(k().m(function e(){return k().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,u.render();case 1:return A(I,l).innerHTML=e.v,e.n=2,u.afterRender();case 2:return e.a(2)}},e)})));case 9:return e.a(2)}},e,this)})),function(){return n.apply(this,arguments)})}],t&&_(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r,u}();function F(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return W(s,"_invoke",function(n,r,o){var i,u,c,s=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return i=t,u=0,c=e,p.n=n,a}};function d(n,r){for(u=n,c=r,t=0;!f&&s&&!o&&t<l.length;t++){var o,i=l[t],d=p.p,h=i[2];n>3?(o=h===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=n<2&&d<i[1])?(u=0,p.v=r,p.n=i[1]):d<h&&(o=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,p.n=h,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,h){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),u=l,c=h;(t=u<2?e:c)||!f;){i||(u?u<3?(u>1&&(p.n=-1),d(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(f=p.n<0)?c:n.call(r,p))!==a)break}catch(t){i=e,u=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(W(t={},r,function(){return this}),t),f=s.prototype=u.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,W(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,W(f,"constructor",s),W(s,"constructor",c),c.displayName="GeneratorFunction",W(s,o,"GeneratorFunction"),W(f),W(f,o,"Generator"),W(f,r,function(){return this}),W(f,"toString",function(){return"[object Generator]"}),(F=function(){return{w:i,m:p}})()}function W(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}W=function(e,t,n,r){function i(t,n){W(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},W(e,t,n,r)}function D(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function H(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){D(i,r,o,a,u,"next",e)}function u(e){D(i,r,o,a,u,"throw",e)}a(void 0)})}}document.addEventListener("DOMContentLoaded",H(F().m(function e(){var t;return F().w(function(e){for(;;)switch(e.n){case 0:return t=new x({content:document.querySelector("#main-content"),drawerButton:document.querySelector("#drawer-button"),navigationDrawer:document.querySelector("#navigation-drawer"),pushToggle:document.querySelector("#push-notification-toggle")}),e.n=1,t.renderPage();case 1:window.addEventListener("hashchange",H(F().m(function e(){return F().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.renderPage();case 1:return e.a(2)}},e)})));case 2:return e.a(2)}},e)})))})();
//# sourceMappingURL=app.a9b9f610d94a0218dc4c.js.map